!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s=[],n=[[" "," ","9"," "," "," "," "," "," "," "],[" "," "," "," "," ","_"," "," "," "," "],[" "," "," "," "," ","8"," ","8"," "," "],[" "," ","3","4","1","3","5"," "," "," "],[" "," ","8","5","3","8","5"," "," "," "],[" ","3","2","9","x","5","4"," ","8"," "],[" "," ","3","3","5","8","3"," "," "," "],[" "," ","5","5","9","7","9"," "," "," "],[" "," ","8","4","4","8","9"," "," "," "],["8"," "," "," "," "," "," "," "," "," "]];s.push(n);n=[[" "," ","9"," "," "," "," "," "," "," "],[" "," "," "," "," ","_"," "," "," "," "],[" "," "," "," "," ","8"," ","8"," "," "],[" "," ","3"," "," ","3","5"," "," "," "],[" "," ","8"," "," ","8","5"," "," "," "],[" ","3","2"," ","x"," ","4"," ","8"," "],[" "," ","3","3","5","8","3"," "," "," "],[" "," ","5","5","9","7","9"," "," "," "],[" "," ","8","4","4","8","9"," "," "," "],["8"," "," "," "," "," "," "," "," "," "]];s.push(n);var h=function(){this.lvl,this.size=.8,this.id="canvas",this.c=document.getElementById(this.id),this.ctx=this.c.getContext("2d"),this.s_height=window.innerHeight*this.size,this.s_width=window.innerHeight*this.size,this.c.setAttribute("width",this.s_width),this.c.setAttribute("height",this.s_height),this.padding=.8,this.sizeB=30,this.lemMap=10,this.drawEl=function(t,e,i){this.ctx.beginPath(),this.ctx.fillStyle=i.bg;var s=this.s_width/this.lemMap;if(this.ctx.fillRect(e*s+4.5*this.padding,t*s+4.5*this.padding,s*this.padding,s*this.padding),i.txt){this.ctx.font=s/1.5+"px Arial",this.ctx.fillStyle=i.txt_bg;var n=t*s+this.lemMap,h=e*s+this.lemMap;this.ctx.fillText(i.txt,h,n+s/2)}},this.update=function(t){console.log("render"),this.ctx.clearRect(0,0,this.c.width,this.c.height),this.lvl=t;for(var e=0;e<this.lvl.length;e++)for(var i=0;i<this.lvl[e].length;i++)this.drawEl(e,i,this.lvl[e][i])},this.clear=function(){console.log("clear"),this.ctx.clearRect(0,0,this.c.width,this.c.height)}};var l=function(){this.hp=9,this.savePosition,this.st_pos={x:0,y:0},this.pos={x:0,y:0},this.data=function(){return{type:"player",bg:"#00ff00",txt_bg:"#ff0000",txt:this.hp}},this.move=function(t){39==t?this.pos.x+=1:37==t?this.pos.x-=1:40==t?this.pos.y+=1:38==t&&(this.pos.y-=1)}};var r={start:{_title:"Минус",_text:'"Minus" — математический лабиринт',_bt:'<a href="#" onclick="run()"> Rkbr </a>'},next:{_title:"Та держать!",_text:"",_bt:'<a href="#" onclick="next()"> Дальше </a>'},clear:{_title:"",_text:"",_bt:""}};var o=function(){this.update=function(t){document.getElementById("_title").innerHTML=r[t]._title,document.getElementById("_text").innerHTML=r[t]._text,document.getElementById("_bt").innerHTML=r[t]._bt},this.clear=function(){this.update("clear")}};function a(t,e){this.level=0,this.maps=t,this.html=new o,this.lvl,this.setting=e,this.render=new h,this.player=new l,this.start=function(){this.createLvl(),this.player.pos.x=0,this.player.pos.y=0,this.player.hp=9;let t=this.setting.setting.p;t.txt=this.player.hp,this.lvl[this.player.pos.y][this.player.pos.x]=t,this.render.update(this.lvl)},this.move=function(t){console.log("move");let e={x:this.player.pos.x,y:this.player.pos.y};this.clear(e),this.player.move(t),!0===this.wall()&&(this.player.pos=e,console.log("wall")),"num"===this.lvl[this.player.pos.y][this.player.pos.x].type?(this.player.hp-=this.lvl[this.player.pos.y][this.player.pos.x].txt,e.num=this.lvl[this.player.pos.y][this.player.pos.x].txt):"fin"===this.lvl[this.player.pos.y][this.player.pos.x].type&&this.LvlUp(),this.lvl[this.player.pos.y][this.player.pos.x]=this.player.data(),(0===this.player.hp||this.player.hp<0)&&this.start(),this.render.update(this.lvl),console.log("move end")},this.wall=function(){var t=this.player.pos.x,e=this.player.pos.y;if(-1===t||t===this.lvl[0].length||-1===e||e===this.lvl.length)return!0},this.clear=function(t){var e=t.x,i=t.y;if(t.num){var s=this.setting.setting._;this.lvl[i][e]=s}else this.lvl[i][e]=this.setting.setting[" "]},this.restart=function(){this.start()},this.LvlUp=function(){this.html.update("next"),this.level+=1,this.render.clear()}}function p(t,e,i){let s=0,n={},h=!1;for(let l in e)l===t&&(n=e[l],h=!0),++s===i&&!1===h&&((n=e.num).txt=t);return n}a.prototype.content=function(t){this.html.update(t)},a.prototype.createLvl=function(t){let e=[],i=this.maps[this.level];for(let t=0;t<i.length;t++){let s=[];for(let e=0;e<i[t].length;e++){let n=p(i[t][e],this.setting.setting,this.setting.lenght),h=Object.assign({},n);s.push(h)}e.push(s)}this.lvl=e};var c=a;var u=new function(t){this.lenght=0,this.setting=t,this.update=function(){for(var t in this.setting)this.lenght++}}({p:{type:"player",bg:"#00ff00",txt_bg:"#ff0000"}," ":{type:"place",bg:"#e4e2e2"},_:{type:"place",bg:"#458dc2"},x:{type:"fin",bg:"#70bc77"},num:{type:"num",bg:"#c6c6c6",txt_bg:"#2b2b2b"}});u.update();var f=new c(s,u);function d(t){f.move(t.keyCode)}f.html.update("start"),window.run=function(){document.addEventListener("keydown",d,!1),f.html.clear(),f.start()},window.next=function(){}}]);